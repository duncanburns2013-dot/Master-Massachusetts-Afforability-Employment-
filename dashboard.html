<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Massachusetts Economic Dashboard | Affordability & Employment Crisis</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.10.3/umd/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-crisis { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); }
        .gradient-dark { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); }
        .stat-card { transition: all 0.2s ease; }
        .stat-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
        .nav-btn { transition: all 0.15s ease; }
        .nav-btn:hover { transform: scale(1.02); }
        .chart-container { min-height: 300px; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, 
            LineChart, Line, Cell, Legend, ComposedChart, Area, ReferenceLine, PieChart, Pie
        } = Recharts;

        // Color palette
        const colors = {
            accent: '#dc2626',
            primary: '#1f2937',
            secondary: '#3b82f6',
            success: '#059669',
            warning: '#d97706',
            muted: '#6b7280',
            light: '#f3f4f6'
        };

        // ============ DATA ============
        const unemploymentRanking = [
            { state: 'South Dakota', rate: 1.9, rank: 1 },
            { state: 'North Dakota', rate: 2.5, rank: 2 },
            { state: 'New Hampshire', rate: 3.0, rank: 7 },
            { state: 'US Average', rate: 4.4, rank: null },
            { state: 'Massachusetts', rate: 4.8, rank: 44 },
            { state: 'California', rate: 5.5, rank: 50 },
            { state: 'DC', rate: 6.0, rank: 51 }
        ];

        const unemploymentHistory = [
            { year: '2019', ma: 3.0, us: 3.7 },
            { year: '2020', ma: 8.9, us: 8.1 },
            { year: '2021', ma: 5.4, us: 5.4 },
            { year: '2022', ma: 3.7, us: 3.6 },
            { year: '2023', ma: 3.5, us: 3.6 },
            { year: '2024', ma: 4.1, us: 4.0 },
            { year: '2025', ma: 4.8, us: 4.4 }
        ];

        const costOfLiving = [
            { category: 'Utilities', ma: 166, diff: '+66%' },
            { category: 'Healthcare', ma: 131, diff: '+31%' },
            { category: 'Housing', ma: 130, diff: '+30%' },
            { category: 'Overall', ma: 108, diff: '+8%' },
            { category: 'Food', ma: 105, diff: '+5%' },
            { category: 'Transport', ma: 102, diff: '+2%' }
        ];

        const housingPrices = [
            { year: '2019', price: 410000 },
            { year: '2020', price: 450000 },
            { year: '2021', price: 550000 },
            { year: '2022', price: 550000 },
            { year: '2023', price: 570000 },
            { year: '2024', price: 615000 },
            { year: '2025', price: 638000 }
        ];

        const regionalPrices = [
            { region: 'Springfield', price: 288000 },
            { region: 'Worcester', price: 450000 },
            { region: 'Statewide', price: 638000 },
            { region: 'Essex County', price: 699000 },
            { region: 'Greater Boston', price: 800000 },
            { region: 'Newburyport', price: 1327602 }
        ];

        const inflationData = [
            { year: '2020', northeast: 1.4, national: 1.2 },
            { year: '2021', northeast: 4.9, national: 4.7 },
            { year: '2022', northeast: 7.1, national: 8.0 },
            { year: '2023', northeast: 3.9, national: 4.1 },
            { year: '2024', northeast: 3.5, national: 2.9 },
            { year: '2025', northeast: 3.3, national: 2.7 }
        ];

        const occupationData = [
            { occupation: 'Food Service', salary: 40280, affordable: false },
            { occupation: 'Healthcare Support', salary: 42970, affordable: false },
            { occupation: 'Personal Care', salary: 44880, affordable: false },
            { occupation: 'Maintenance', salary: 46250, affordable: false },
            { occupation: 'Transportation', salary: 50080, affordable: false },
            { occupation: 'Production', salary: 51820, affordable: false },
            { occupation: 'Office Admin', salary: 55740, affordable: false },
            { occupation: 'Sales', salary: 61060, affordable: true },
            { occupation: 'Protective Svc', salary: 66780, affordable: true },
            { occupation: 'Construction', salary: 79120, affordable: true },
            { occupation: 'Education', salary: 80050, affordable: true },
            { occupation: 'Business/Finance', salary: 101770, affordable: true },
            { occupation: 'Healthcare Prac.', salary: 115850, affordable: true },
            { occupation: 'Computer/Math', salary: 126150, affordable: true },
            { occupation: 'Management', salary: 160460, affordable: true }
        ];

        const consumptionData = [
            { category: 'Financial Services', growth: 12.20 },
            { category: 'Transportation', growth: 9.67 },
            { category: 'Healthcare', growth: 7.41 },
            { category: 'Housing/Utilities', growth: 6.76 },
            { category: 'Total Consumption', growth: 6.10 },
            { category: 'Income Growth', growth: 5.09 }
        ];

        // ============ COMPONENTS ============
        const StatCard = ({ title, value, subtitle, trend, trendLabel }) => (
            <div className="stat-card bg-white rounded-xl p-5 shadow-sm border border-gray-100">
                <p className="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">{title}</p>
                <p className="text-3xl font-bold text-gray-900 mb-1">{value}</p>
                {subtitle && <p className="text-sm text-gray-600">{subtitle}</p>}
                {trend !== undefined && (
                    <p className={`text-sm font-semibold mt-2 ${trend > 0 ? 'text-red-600' : 'text-green-600'}`}>
                        {trend > 0 ? '‚ñ≤' : '‚ñº'} {trendLabel}
                    </p>
                )}
            </div>
        );

        const SectionHeader = ({ title, subtitle }) => (
            <div className="mb-6">
                <h2 className="text-2xl font-bold text-gray-900 tracking-tight">{title}</h2>
                {subtitle && <p className="text-gray-600 mt-1">{subtitle}</p>}
            </div>
        );

        const formatCurrency = (value) => `$${value.toLocaleString()}`;

        // ============ MAIN DASHBOARD ============
        const MassachusettsDashboard = () => {
            const [activeSection, setActiveSection] = useState('overview');

            const NavButton = ({ section, label, icon }) => (
                <button
                    onClick={() => setActiveSection(section)}
                    className={`nav-btn px-4 py-2.5 rounded-lg text-sm font-medium ${
                        activeSection === section 
                            ? 'bg-gray-900 text-white shadow-lg' 
                            : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'
                    }`}
                >
                    <span className="mr-1.5">{icon}</span>{label}
                </button>
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
                        <div className="max-w-7xl mx-auto px-4 py-4">
                            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
                                <div>
                                    <h1 className="text-xl font-bold text-gray-900 tracking-tight">
                                        Massachusetts Economic Dashboard
                                    </h1>
                                    <p className="text-sm text-gray-500">Affordability & Employment Crisis Analysis</p>
                                </div>
                                <div className="flex items-center gap-2 text-sm">
                                    <span className="px-2.5 py-1 bg-red-100 text-red-700 rounded-full font-semibold text-xs">CRISIS</span>
                                    <span className="text-gray-400">|</span>
                                    <span className="text-gray-600">Data: January 2026</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Navigation */}
                    <nav className="bg-gray-50 border-b border-gray-200 sticky top-16 z-40">
                        <div className="max-w-7xl mx-auto px-4 py-3">
                            <div className="flex gap-2 overflow-x-auto pb-1">
                                <NavButton section="overview" label="Overview" icon="üìä" />
                                <NavButton section="employment" label="Employment" icon="üíº" />
                                <NavButton section="housing" label="Housing" icon="üè†" />
                                <NavButton section="inflation" label="Inflation" icon="üìà" />
                                <NavButton section="income" label="Income" icon="üí∞" />
                                <NavButton section="affordability" label="Affordability" icon="‚ö†Ô∏è" />
                            </div>
                        </div>
                    </nav>

                    {/* Main Content */}
                    <main className="max-w-7xl mx-auto px-4 py-8">
                        
                        {/* OVERVIEW SECTION */}
                        {activeSection === 'overview' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="The Massachusetts Crisis at a Glance" 
                                    subtitle="Key metrics showing the state's economic challenges ‚Äî all from official government data"
                                />
                                
                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                    <StatCard title="Unemployment Rate" value="4.8%" subtitle="Rank: #44 of 51" trend={1} trendLabel="vs. 4.4% national" />
                                    <StatCard title="Cost of Living Rank" value="#2" subtitle="Most expensive state" />
                                    <StatCard title="Median Home Price" value="$638K" subtitle="+55% since 2019" trend={1} trendLabel="+3.7% YoY" />
                                    <StatCard title="Affordability Gap" value="55%" subtitle="Short of 'comfortable'" />
                                </div>

                                {/* Big Number Callout */}
                                <div className="gradient-crisis rounded-2xl p-8 text-white">
                                    <div className="grid md:grid-cols-2 gap-8 items-center">
                                        <div>
                                            <p className="text-red-200 text-sm uppercase tracking-wider mb-2 font-medium">The Bottom Line</p>
                                            <p className="text-5xl font-extrabold mb-4">$313,747</p>
                                            <p className="text-xl">Annual income needed for a family of 4 to live "comfortably" in Massachusetts</p>
                                        </div>
                                        <div className="bg-white/10 rounded-xl p-6 backdrop-blur">
                                            <p className="text-red-200 text-sm mb-2 font-medium">Median Family Income</p>
                                            <p className="text-3xl font-bold">$140,309</p>
                                            <div className="mt-4 pt-4 border-t border-white/20">
                                                <p className="text-red-200 text-sm">Shortfall</p>
                                                <p className="text-2xl font-bold">-$173,438 (45%)</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Charts */}
                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Unemployment Trend: MA vs. National</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={280}>
                                                <LineChart data={unemploymentHistory}>
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis dataKey="year" tick={{ fontSize: 12 }} />
                                                    <YAxis tick={{ fontSize: 12 }} domain={[0, 10]} />
                                                    <Tooltip />
                                                    <Legend />
                                                    <Line type="monotone" dataKey="ma" stroke={colors.accent} strokeWidth={3} name="Massachusetts" dot={{ fill: colors.accent, r: 4 }} />
                                                    <Line type="monotone" dataKey="us" stroke={colors.muted} strokeWidth={2} strokeDasharray="5 5" name="US Average" />
                                                </LineChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Cost of Living vs. National (Index: 100)</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={280}>
                                                <BarChart data={costOfLiving} layout="vertical">
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis type="number" domain={[0, 180]} tick={{ fontSize: 12 }} />
                                                    <YAxis dataKey="category" type="category" width={75} tick={{ fontSize: 11 }} />
                                                    <Tooltip formatter={(value) => `${value} (National: 100)`} />
                                                    <ReferenceLine x={100} stroke={colors.muted} strokeDasharray="3 3" />
                                                    <Bar dataKey="ma" fill={colors.accent} radius={[0, 4, 4, 0]} name="Massachusetts" />
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* EMPLOYMENT SECTION */}
                        {activeSection === 'employment' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="Employment Crisis" 
                                    subtitle="Massachusetts ranks 44th in unemployment ‚Äî only 7 states and DC are worse"
                                />

                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                    <StatCard title="Unemployment Rate" value="4.8%" subtitle="December 2025" />
                                    <StatCard title="National Rank" value="#44" subtitle="of 51 (50 states + DC)" />
                                    <StatCard title="Jobs Lost 2025" value="-4,500" subtitle="Net change" />
                                    <StatCard title="Layoffs YTD" value="323K" subtitle="+13.7% vs 2024" />
                                </div>

                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">State Unemployment Rankings (Dec 2025)</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <BarChart data={unemploymentRanking} layout="vertical">
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis type="number" domain={[0, 7]} tick={{ fontSize: 12 }} tickFormatter={(v) => `${v}%`} />
                                                    <YAxis dataKey="state" type="category" width={100} tick={{ fontSize: 11 }} />
                                                    <Tooltip formatter={(value) => `${value}%`} />
                                                    <ReferenceLine x={4.4} stroke={colors.muted} strokeDasharray="3 3" />
                                                    <Bar dataKey="rate" radius={[0, 4, 4, 0]}>
                                                        {unemploymentRanking.map((entry, index) => (
                                                            <Cell key={`cell-${index}`} fill={entry.state === 'Massachusetts' ? colors.accent : entry.state === 'US Average' ? colors.muted : colors.secondary} />
                                                        ))}
                                                    </Bar>
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Unemployment History: MA vs US</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <ComposedChart data={unemploymentHistory}>
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis dataKey="year" tick={{ fontSize: 12 }} />
                                                    <YAxis tick={{ fontSize: 12 }} domain={[0, 10]} tickFormatter={(v) => `${v}%`} />
                                                    <Tooltip formatter={(value) => `${value}%`} />
                                                    <Legend />
                                                    <Area type="monotone" dataKey="us" fill="#e5e7eb" stroke={colors.muted} name="US Average" />
                                                    <Line type="monotone" dataKey="ma" stroke={colors.accent} strokeWidth={3} name="Massachusetts" dot={{ fill: colors.accent, r: 5 }} />
                                                </ComposedChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-amber-50 border border-amber-200 rounded-xl p-6">
                                    <h3 className="font-bold text-amber-800 mb-3">‚ö†Ô∏è Key Employment Concerns</h3>
                                    <div className="grid md:grid-cols-2 gap-3 text-amber-900">
                                        <p>‚Ä¢ MA was the <strong>only state</strong> to extend unemployment benefits to 30 weeks</p>
                                        <p>‚Ä¢ September 2025 was the <strong>worst month since COVID</strong> (-11,100 jobs)</p>
                                        <p>‚Ä¢ Recent college graduates: <strong>5.76%</strong> unemployment, <strong>34%</strong> underemployment</p>
                                        <p>‚Ä¢ Insured unemployment rate: <strong>2.7%</strong> (5th highest in nation)</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* HOUSING SECTION */}
                        {activeSection === 'housing' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="Housing Unattainability" 
                                    subtitle="The median MA family cannot afford the median MA home"
                                />

                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                    <StatCard title="Median Home Price" value="$638K" subtitle="Statewide 2025" trend={1} trendLabel="+3.7% YoY" />
                                    <StatCard title="Greater Boston" value="$800K" subtitle="Median price" />
                                    <StatCard title="Income Needed" value="$171K" subtitle="To afford median home" />
                                    <StatCard title="Housing Deficit" value="222K" subtitle="Units needed by 2030" />
                                </div>

                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Median Home Price Trend (Statewide)</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <ComposedChart data={housingPrices}>
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis dataKey="year" tick={{ fontSize: 12 }} />
                                                    <YAxis tick={{ fontSize: 12 }} tickFormatter={(v) => `$${v/1000}K`} domain={[350000, 700000]} />
                                                    <Tooltip formatter={(value) => formatCurrency(value)} />
                                                    <Area type="monotone" dataKey="price" fill="#fee2e2" stroke={colors.accent} strokeWidth={2} />
                                                    <Line type="monotone" dataKey="price" stroke={colors.accent} strokeWidth={3} dot={{ fill: colors.accent, r: 5 }} />
                                                </ComposedChart>
                                            </ResponsiveContainer>
                                        </div>
                                        <p className="text-center text-sm text-gray-500 mt-2">+55.6% increase since 2019</p>
                                    </div>

                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Regional Price Comparison (2025)</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <BarChart data={regionalPrices} layout="vertical">
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis type="number" tickFormatter={(v) => `$${v/1000}K`} domain={[0, 1500000]} tick={{ fontSize: 11 }} />
                                                    <YAxis dataKey="region" type="category" width={100} tick={{ fontSize: 11 }} />
                                                    <Tooltip formatter={(value) => formatCurrency(value)} />
                                                    <Bar dataKey="price" fill={colors.accent} radius={[0, 4, 4, 0]} />
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                    <h3 className="font-bold text-gray-900 mb-4">Housing Affordability Calculation</h3>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <p className="text-sm text-gray-500 mb-1">Median Home</p>
                                            <p className="text-2xl font-bold text-gray-900">$638,000</p>
                                        </div>
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <p className="text-sm text-gray-500 mb-1">Monthly Payment</p>
                                            <p className="text-2xl font-bold text-gray-900">$3,996</p>
                                            <p className="text-xs text-gray-400">@ 6.1% rate, 20% down</p>
                                        </div>
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <p className="text-sm text-gray-500 mb-1">Income Needed</p>
                                            <p className="text-2xl font-bold text-gray-900">$171,257</p>
                                            <p className="text-xs text-gray-400">28% debt-to-income</p>
                                        </div>
                                        <div className="text-center p-4 bg-red-50 rounded-lg border-2 border-red-200">
                                            <p className="text-sm text-red-600 mb-1 font-medium">Gap from Median</p>
                                            <p className="text-2xl font-bold text-red-700">-$66,457</p>
                                            <p className="text-xs text-red-500">Median HH: $104,800</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* INFLATION SECTION */}
                        {activeSection === 'inflation' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="Inflation Squeeze" 
                                    subtitle="Northeast inflation consistently outpaces the national average"
                                />

                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                    <StatCard title="Northeast CPI" value="3.3%" subtitle="December 2025" trend={1} trendLabel="vs 2.7% national" />
                                    <StatCard title="Core Inflation" value="3.1%" subtitle="Ex food & energy" />
                                    <StatCard title="Cumulative" value="+21.6%" subtitle="Since Jan 2020" />
                                    <StatCard title="Energy" value="+5.6%" subtitle="YoY increase" />
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                    <h3 className="font-bold text-gray-900 mb-4">Inflation: Northeast vs. National (Annual %)</h3>
                                    <div className="chart-container">
                                        <ResponsiveContainer width="100%" height={350}>
                                            <ComposedChart data={inflationData}>
                                                <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                <XAxis dataKey="year" tick={{ fontSize: 12 }} />
                                                <YAxis tick={{ fontSize: 12 }} domain={[0, 9]} tickFormatter={(v) => `${v}%`} />
                                                <Tooltip formatter={(value) => `${value}%`} />
                                                <Legend />
                                                <Bar dataKey="national" fill="#d1d5db" name="National" radius={[4, 4, 0, 0]} />
                                                <Bar dataKey="northeast" fill={colors.accent} name="Northeast" radius={[4, 4, 0, 0]} />
                                                <ReferenceLine y={2} stroke={colors.success} strokeDasharray="3 3" label={{ value: 'Fed Target', fill: colors.success, fontSize: 10 }} />
                                            </ComposedChart>
                                        </ResponsiveContainer>
                                    </div>
                                </div>

                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">December 2025 Category Breakdown</h3>
                                        <div className="space-y-3">
                                            {[
                                                { category: 'Energy', northeast: 5.6, national: 4.1 },
                                                { category: 'Food', northeast: 3.4, national: 2.5 },
                                                { category: 'All Items', northeast: 3.3, national: 2.7 },
                                                { category: 'Core (ex F&E)', northeast: 3.1, national: 3.2 }
                                            ].map((item, i) => (
                                                <div key={i} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                    <span className="font-medium text-gray-700">{item.category}</span>
                                                    <div className="flex gap-4 items-center">
                                                        <span className="text-red-600 font-bold">{item.northeast}%</span>
                                                        <span className="text-gray-400 text-sm">vs</span>
                                                        <span className="text-gray-600">{item.national}%</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="gradient-dark rounded-xl p-6 text-white">
                                        <h3 className="font-bold mb-4 text-lg">The Real Wage Story</h3>
                                        <div className="space-y-5">
                                            <div>
                                                <p className="text-gray-400 text-sm">Nominal Wage Growth (2021-2025)</p>
                                                <p className="text-3xl font-bold text-green-400">+21.8%</p>
                                            </div>
                                            <div>
                                                <p className="text-gray-400 text-sm">CPI Increase (2021-2025)</p>
                                                <p className="text-3xl font-bold text-red-400">+22.7%</p>
                                            </div>
                                            <div className="pt-4 border-t border-gray-700">
                                                <p className="text-gray-400 text-sm">Real Wage Change</p>
                                                <p className="text-3xl font-bold text-red-500">-0.7%</p>
                                                <p className="text-sm text-gray-400 mt-1">Workers have LESS purchasing power than 4 years ago</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* INCOME SECTION */}
                        {activeSection === 'income' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="Income by Occupation" 
                                    subtitle="Only 8 of 15 common occupations pay enough to meet basic living expenses ($60,080)"
                                />

                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                    <StatCard title="Median HH Income" value="$104,800" subtitle="Rank: #1 nationally" />
                                    <StatCard title="Living Wage (Single)" value="$60,080" subtitle="MIT Calculator" />
                                    <StatCard title="Jobs Below Threshold" value="7 of 15" subtitle="Common occupations" />
                                    <StatCard title="Real Income Growth" value="+4.1%" subtitle="2015-2024 (vs 5.5% US)" />
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                    <h3 className="font-bold text-gray-900 mb-4">Annual Salary vs. Living Wage Threshold ($60,080)</h3>
                                    <div style={{ height: '500px' }}>
                                        <ResponsiveContainer width="100%" height="100%">
                                            <BarChart data={occupationData} layout="vertical">
                                                <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                <XAxis type="number" tickFormatter={(v) => `$${v/1000}K`} domain={[0, 180000]} tick={{ fontSize: 11 }} />
                                                <YAxis dataKey="occupation" type="category" width={110} tick={{ fontSize: 10 }} />
                                                <Tooltip formatter={(value) => formatCurrency(value)} />
                                                <ReferenceLine x={60080} stroke={colors.accent} strokeWidth={2} strokeDasharray="5 5" />
                                                <Bar dataKey="salary" radius={[0, 4, 4, 0]} name="Annual Salary">
                                                    {occupationData.map((entry, index) => (
                                                        <Cell key={`cell-${index}`} fill={entry.affordable ? colors.success : colors.accent} />
                                                    ))}
                                                </Bar>
                                            </BarChart>
                                        </ResponsiveContainer>
                                    </div>
                                    <div className="flex justify-center gap-6 mt-4">
                                        <div className="flex items-center gap-2">
                                            <div className="w-4 h-4 rounded" style={{ backgroundColor: colors.accent }}></div>
                                            <span className="text-sm text-gray-600">Below living wage</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <div className="w-4 h-4 rounded" style={{ backgroundColor: colors.success }}></div>
                                            <span className="text-sm text-gray-600">Meets living wage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* AFFORDABILITY SECTION */}
                        {activeSection === 'affordability' && (
                            <div className="space-y-8">
                                <SectionHeader 
                                    title="The Affordability Crisis" 
                                    subtitle="The gap between what families need and what they earn"
                                />

                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Family Income vs. "Comfortable" Threshold</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <BarChart data={[
                                                    { label: 'Family Needs', value: 313747 },
                                                    { label: 'Median Income', value: 140309 }
                                                ]}>
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis dataKey="label" tick={{ fontSize: 12 }} />
                                                    <YAxis tickFormatter={(v) => `$${v/1000}K`} domain={[0, 350000]} tick={{ fontSize: 12 }} />
                                                    <Tooltip formatter={(value) => formatCurrency(value)} />
                                                    <Bar dataKey="value" radius={[4, 4, 0, 0]}>
                                                        <Cell fill={colors.accent} />
                                                        <Cell fill={colors.success} />
                                                    </Bar>
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                        <div className="mt-4 p-4 bg-red-50 rounded-lg border border-red-200 text-center">
                                            <p className="text-sm text-red-600 font-medium">Gap</p>
                                            <p className="text-2xl font-bold text-red-700">-$173,438 (55% short)</p>
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                        <h3 className="font-bold text-gray-900 mb-4">Consumption Growth Outpacing Income (2024)</h3>
                                        <div className="chart-container">
                                            <ResponsiveContainer width="100%" height={300}>
                                                <BarChart data={consumptionData} layout="vertical">
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
                                                    <XAxis type="number" domain={[0, 14]} tickFormatter={(v) => `${v}%`} tick={{ fontSize: 11 }} />
                                                    <YAxis dataKey="category" type="category" width={120} tick={{ fontSize: 10 }} />
                                                    <Tooltip formatter={(value) => `${value}%`} />
                                                    <ReferenceLine x={5.09} stroke={colors.success} strokeWidth={2} strokeDasharray="5 5" />
                                                    <Bar dataKey="growth" radius={[0, 4, 4, 0]}>
                                                        {consumptionData.map((entry, index) => (
                                                            <Cell key={`cell-${index}`} fill={entry.category === 'Income Growth' ? colors.success : colors.accent} />
                                                        ))}
                                                    </Bar>
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                        <p className="text-center text-sm text-gray-500 mt-2">Even with 5.09% income growth, consumption grew 6.10%</p>
                                    </div>
                                </div>

                                <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
                                    <h3 className="font-bold text-gray-900 mb-4">Living Wage Thresholds (Massachusetts-Specific)</h3>
                                    <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
                                        {[
                                            { type: 'Single Adult', wage: 60080 },
                                            { type: 'Couple (no kids)', wage: 80602 },
                                            { type: 'Single + 1 Child', wage: 114708 },
                                            { type: 'Couple + 1 Child', wage: 124849 },
                                            { type: 'Couple + 2 Kids', wage: 156857 }
                                        ].map((item, i) => (
                                            <div key={i} className="text-center p-4 bg-gray-50 rounded-lg">
                                                <p className="text-xs text-gray-500 mb-1 font-medium">{item.type}</p>
                                                <p className="text-xl font-bold text-gray-900">{formatCurrency(item.wage)}</p>
                                                <p className="text-xs text-gray-400">per year</p>
                                            </div>
                                        ))}
                                    </div>
                                    <p className="text-center text-xs text-gray-400 mt-4">Source: MIT Living Wage Calculator (Massachusetts, 2025)</p>
                                </div>

                                <div className="gradient-crisis rounded-2xl p-8 text-white">
                                    <h3 className="font-bold text-xl mb-6">Who Can Actually Afford Massachusetts?</h3>
                                    <div className="grid md:grid-cols-3 gap-6">
                                        <div className="bg-white/10 rounded-xl p-5 backdrop-blur">
                                            <p className="text-red-200 text-sm font-medium">Top 10%</p>
                                            <p className="text-2xl font-bold mt-1">‚úì Comfortable</p>
                                            <p className="text-sm text-red-200 mt-2">Can afford housing + savings + discretionary</p>
                                        </div>
                                        <div className="bg-white/10 rounded-xl p-5 backdrop-blur">
                                            <p className="text-red-200 text-sm font-medium">Median (50th)</p>
                                            <p className="text-2xl font-bold mt-1">‚ö†Ô∏è Treading Water</p>
                                            <p className="text-sm text-red-200 mt-2">Meeting basics, no margin for error</p>
                                        </div>
                                        <div className="bg-white/10 rounded-xl p-5 backdrop-blur">
                                            <p className="text-red-200 text-sm font-medium">Bottom 60%</p>
                                            <p className="text-2xl font-bold mt-1">‚úó Drowning</p>
                                            <p className="text-sm text-red-200 mt-2">Cannot afford basic living expenses</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <footer className="mt-12 pt-8 border-t border-gray-200">
                            <div className="text-center text-sm text-gray-500">
                                <p className="font-semibold text-gray-700 mb-2">Data Sources (Official Only)</p>
                                <p className="leading-relaxed">BLS (LAUS, CES, OES, CPI) ‚Ä¢ BEA (SAINC, SAPCE, RPP) ‚Ä¢ FRED ‚Ä¢ Census ACS ‚Ä¢ Warren Group ‚Ä¢ MIT Living Wage ‚Ä¢ CHIA ‚Ä¢ EIA</p>
                                <p className="mt-4 text-gray-400">Last Updated: January 31, 2026</p>
                            </div>
                        </footer>
                    </main>
                </div>
            );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MassachusettsDashboard />);
    </script>
</body>
</html>
